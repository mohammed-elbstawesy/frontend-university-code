<div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 mb-10">
    @for (stat of stats; track stat.label) {
        <article class="bg-[#1c1c2e] border border-slate-800 rounded-xl p-6 relative overflow-hidden group hover:bg-[#222b42] hover:-translate-y-1 hover:border-slate-700 transition-all duration-300">
            <!-- Top Line Effect -->
            <div [className]="'absolute top-0 left-0 right-0 h-0.5 opacity-0 group-hover:opacity-100 transition-opacity ' + stat.bg.replace('/10', '')"></div>
            
            <div class="flex justify-between items-start mb-4">
                <span class="text-sm font-medium text-slate-400">{{ stat.label }}</span>
                <div [className]="'w-10 h-10 rounded-lg flex items-center justify-center ' + stat.bg + ' ' + stat.color">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                        <path [attr.d]="stat.iconPath" />
                    </svg>
                </div>
            </div>
            <p class="text-3xl font-bold text-white">{{ stat.value }}</p>
        </article>
    }
</div>










<div class="mt-8 bg-[#1c1c2e] border border-slate-800 rounded-xl p-6 shadow-lg">
    <div class="flex justify-between items-center mb-6">
        <h3 class="text-xl font-bold text-white flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-400"><path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"></path><path d="M3 5v14a2 2 0 0 0 2 2h16v-5"></path><path d="M18 12a2 2 0 0 0 0 4h4v-4Z"></path></svg>
            System Audit Logs
        </h3>
        <button (click)="fetchLogs()" class="p-2 bg-slate-800 hover:bg-slate-700 rounded-lg transition-colors text-slate-400 hover:text-white" title="Refresh Logs">
            <svg [class.animate-spin]="isLoadingLogs" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>
        </button>
    </div>

    <div class="overflow-x-auto rounded-lg border border-slate-700/50">
        <table class="w-full text-left border-collapse">
            <thead>
                <tr class="bg-[#13131f] text-slate-400 text-xs uppercase tracking-wider font-medium">
                    <th class="p-4 border-b border-slate-700/50">Level</th>
                    <th class="p-4 border-b border-slate-700/50">Message</th>
                    <th class="p-4 border-b border-slate-700/50">User (ID)</th> <th class="p-4 border-b border-slate-700/50 text-right">Timestamp</th>
                </tr>
            </thead>
            <tbody class="text-sm text-slate-300 divide-y divide-slate-700/30">
                
                @if (isLoadingLogs) {
                    <tr>
                        <td colspan="4" class="p-8 text-center text-slate-500">
                            Loading system logs...
                        </td>
                    </tr>
                } 
                @else if (logs.length === 0) {
                    <tr>
                        <td colspan="4" class="p-8 text-center text-slate-500">
                            No logs found.
                        </td>
                    </tr>
                } 
                @else {
                    @for (log of logs; track log._id) {
                        <tr class="hover:bg-white/[0.02] transition-colors group">
                            
                            <td class="p-4">
                                <span [className]="'px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wide border ' + getLogLevelClass(log.level)">
                                    {{ log.level }}
                                </span>
                            </td>

                            <td class="p-4 font-mono text-xs text-slate-200">
                                {{ log.message }}
                            </td>

                            <td class="p-4 text-xs text-slate-500 font-mono">
                                {{ log.meta?.userId || log.meta?.user || 'System' }}
                            </td>

                            <td class="p-4 text-right text-xs text-slate-500 font-mono">
                                {{ log.timestamp | date:'medium' }}
                            </td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>
</div>